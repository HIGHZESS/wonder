<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ez.wonder.form.model.FormDAO">
	<insert id="insertForm" parameterType="formVo">
		<selectKey keyProperty="formNo" resultType="int" order="BEFORE">
			select form_seq.nextval from dual
		</selectKey>
		insert into form(FORM_NO, USER_ID, P_USER_ID, PD_NO, FORM_TITLE, FORM_CONTENT, PRICE, ORDERSTART, ORDEREND)
		values(#{formNo}, #{userId}, #{pUserId}, #{pdNo}, #{formTitle}, #{formContent}, #{price}, #{orderstart}, #{orderend})
	</insert>
	
	<select id="selectFormByUserId" parameterType="string" resultType="formVo">
		select * from form where p_user_id=#{userId}
	</select>
	
	<select id="selectCount" parameterType="reviewVo" resultType="int">
		select count(*) from form where pd_no=#{pdNo} and user_id=#{userId} and pay_flag='Y'
	</select>
</mapper>