<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ez.wonder.pd.model.ProductDAO">
	<sql id="PdColsRaw">
		PD_NO
		, USER_ID
		, CATE_TYPE
		, PD_TITLE
		, REGDATE
		, DEL_TYPE
		, READ_COUNT
		, LANG
		, FRAME
	</sql>
			
	<sql id="DetailColsRaw">
		DETAIL_NO
		, PD_NO
		, PD_TYPE
		, PD_PRICE
		, PD_TERM
		, EDIT_COUNT
		, SERVICE_EXPLANATION
		, EDIT_EXPLANATION
		, COMMERCIAL
		, CODE_SUPPLY
		, PAYMENT
		, CUSTOMIZE
	</sql>
	
	<select id="selectAllPd" resultType="productVo">
		select
			<include refid="PdColsRaw" />
		from product
	</select>

	<insert id="insertPd" parameterType="productVo" >
		<selectKey resultType="int" keyProperty="pdNo" order="BEFORE">
			select PRODUCT_seq.nextval from dual
		</selectKey>
		INSERT INTO PRODUCT
		(
			PD_NO
			, USER_ID
			, CATE_TYPE
			, PD_TITLE
			, LANG
			, FRAME
		)VALUES(
			#{pdNo}
			, #{userId}
			, #{cateType}
			, #{pdTitle}
			, #{lang}
			, #{frame}
		)
	</insert>
	
	<insert id="insertPdDetail" parameterType="PdDetailVO" >
		<selectKey resultType="int" keyProperty="detailNo" order="BEFORE">
			select PD_DETAIL_seq.nextval from dual
		</selectKey>
		INSERT INTO PD_DETAIL
		(
			<include refid="DetailColsRaw" />
		)VALUES(
			#{detailNo}
			, #{pdNo}
			, #{pdType}
			, #{pdPrice}
			, #{pdTerm}
			, #{editCount}
			, #{serviceExplanation}
			, #{editExplanation}
			, #{commercial}
			, #{codeSupply}
			, #{payment}
			, #{customize}
		)
	</insert>
	
	<insert id="insertPdImage" parameterType="PdImageVO" >
		<selectKey resultType="int" keyProperty="PdImgNo" order="BEFORE">
			select PD_IMAGE_seq.nextval from dual
		</selectKey>
		INSERT INTO PD_IMAGE
		(
			PDIMG_NO
			, PD_NO
			, FILE_NAME
			, ORIGINAL_FILE_NAME
			, FILE_SIZE
			, FILE_TYPE
		)VALUES(
			#{PdImgNo}
			, #{PdNo}
			, #{FileName}
			, #{OriginalFileName}
			, #{FileSize}
			, #{FileType}
		)
	</insert>
	
	
</mapper>